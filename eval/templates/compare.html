{% extends "base.html" %}

{% block content %}
{% load static %}
{% load custom_filters %}

<h3><a href="{% url 'eval:detail' entry_1.id %}">{{ entry_1.name }}</a> vs. <a href="{% url 'eval:detail' entry_2.id %}">{{ entry_2.name }}</a></h3>

<script defer src="https://cdn.jsdelivr.net/npm/img-comparison-slider@8/dist/index.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/img-comparison-slider@8/dist/styles.css"/>

<h4>Reconstruction</h4>
<div style="overflow-x:auto;">
    <table>
        <tr>
            <th style="width:0;">#</th>
            <th style="min-width: 30ch;">Name</th>
            {% for metric in entry_1.metric_fields %}
            <th>{{ metric.verbose_name }}</th>
            {% endfor %}
        </tr>
        <tr>
            <td>1</td>
            <td>
                <div class="namebox">
                    <span>
                        <a href="{% url 'eval:detail' entry_1.id %}">{{ entry_1.name }}</a>
                    </span>
                    {% if entry.visibility != "ANON" and entry.code_url|length > 0 %}
                        &nbsp;<a href="{{ entry_1.code_url }}" target="_blank" rel="noopener noreferrer" class="codebutton">code</a>
                    {% endif %}
                </div>
            </td>
            {% for metric, emph in entry_1.metrics|zip:emphasis %}
            {% if emph %}
                <td><u>{{ metric|na_if_missing:3 }}</u></td>
            {% else %}
                <td>{{ metric|na_if_missing:3 }}</td>
            {% endif %}
            {% endfor %}
        </tr>
        <tr>
            <td>2</td>
            <td>
                <div class="namebox">
                    <span>
                        <a href="{% url 'eval:detail' entry_2.id %}">{{ entry_2.name }}</a>
                    </span>
                    {% if entry.visibility != "ANON" and entry.code_url|length > 0 %}
                        &nbsp;<a href="{{ entry_2.code_url }}" target="_blank" rel="noopener noreferrer" class="codebutton">code</a>
                    {% endif %}
                </div>
            </td>
            {% for metric, emph in entry_2.metrics|zip:emphasis %}
            {% if not emph %}
                <td><u>{{ metric|na_if_missing:3 }}</u></td>
            {% else %}
                <td>{{ metric|na_if_missing:3 }}</td>
            {% endif %}
            {% endfor %}
        </tr>
    </table>
</div>
</br>
<div class="auto-grid">
    {% for path in image_subpaths %}
        <img-comparison-slider>
        <figure slot="first" class="before">
            <img slot="first" src="{% get_media_prefix %}{{ samples_dir_1 }}/{{ path }}" />
            <figcaption>#1</figcaption>
        </figure>
        <figure slot="second" class="after">
            <img slot="second" src="{% get_media_prefix %}{{ samples_dir_2 }}/{{ path }}" />
            <figcaption>#2</figcaption>
        </figure>
        </img-comparison-slider>
    {% endfor %}
</div>

{% endblock %}