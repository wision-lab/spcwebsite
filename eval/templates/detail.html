{% extends "base.html" %}

{% block content %}
{% load na_filters %}

<h3>{{ entry.name }}</h3>
{% if entry.process_status == "WAIT_UPL" or entry.process_status == "WAIT_PROC" %}
<p>&nbsp;&#8634; <i>{{entry.get_process_status_display}}</i></p>
{% endif %}
{% if entry.process_status == "FAIL"%}
<p>&nbsp;&#x2716; <i>{{entry.get_process_status_display}}</i></p>
{% endif %}
<p>{{entry.pub_date}} &nbsp;&mdash;&nbsp; {{entry.get_visibility_display}}</p>
{% if entry.visibility == "ANON" %}
<p>Anonymous.</p>
{% elif entry.citation|length > 0 %}
<p>{{ entry.citation }}</p>
{% endif %}

<p>
    {% if entry.visibility != "ANON" and entry.code_url|length > 0 %}
    Code: <a href="{{ entry.code_url }}" target="_blank" rel="noopener noreferrer">{{ entry.code_url }}</a>
    {% else %}
    &nbsp;
    {% endif %}
</p>

{% if user.is_authenticated and user.pk == entry.creator.pk %}
<nav style="padding-top:0px">
    <a href="{% url 'eval:edit' entry.id %}" style="font-size:0.8rem">Edit</a>
    <a href="{% url 'eval:delete' entry.id %}" style="font-size:0.8rem">Delete</a>
</nav>
{% endif %}

<h4>Reconstruction</h4>
<table>
    <tr>
        {% for metric in entry.metric_fields %}
        <th>{{ metric.verbose_name }}</th>
        {% endfor %}
    </tr>
    <tr>
        {% for metric in entry.metrics %}
        <td>{{ metric|na_if_missing:3 }}</td>
        {% endfor %}
    </tr>
    <td colspan="7" class="citation">
        &nbsp;
    </td>
</table>

{% endblock %}