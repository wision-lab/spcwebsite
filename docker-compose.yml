services:
  website:
    # To build and debug locally, use the following and uncomment the `image` line below.
    # and expose to a non-privileged port, eg: `8000:80`
    # build:
    #   dockerfile: Dockerfile
    # pull_policy: build
    # Note: replace the ':sha256-' with '@sha256:'
    image: ghcr.io/wision-lab/spcwebsite@sha256:e334fbec04f917cecbe26dad0a9a7b61d1e93becdaa1db24c092d19e74102173
    restart: unless-stopped
    ports:
      - 80:80
      - 443:443
    volumes:
      - storage:/storage
    environment:
      # Vars that point to paths are used to mount volumes 
      # and replaced with defaults inside the container
      - SPC_DEBUG=${SPC_DEBUG} 
      - SPC_UPLOADS_ENABLED=${SPC_UPLOADS_ENABLED}
      - SPC_FROMEMAIL=${SPC_FROMEMAIL}
      - RESEND_API_KEY=${RESEND_API_KEY}
      - SPC_SECRET_KEY=${SPC_SECRET_KEY}
      - SPC_NUM_THREADS=${SPC_NUM_THREADS}

volumes:
  storage: